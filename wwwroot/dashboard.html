<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>Moja str√°nka</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1 id="nadpis">Vitaj sp√§≈•!</h1>
    <p id="info"></p>

    <h2 id="zoznamKvizov">Tvoje kv√≠zy</h2>
    <ul id="kvizy"></ul>

    <button id="spustitBtn" onclick="location.href='kviz.html'">Spusti≈• nov√Ω kv√≠z</button>
    <button id="logout"> Odhl√°si≈• sa</button>
    <button id="langToggle">üåê English</button>

    <script>
        let currentLang = "sk";

        const texts = {
            sk: {
                title: "Moja str√°nka",
                welcome: "Vitaj sp√§≈•!",
                quizzes: "Tvoje kv√≠zy",
                startQuiz: " Spusti≈• nov√Ω kv√≠z",
                logout: " Odhl√°si≈• sa",
                logoutAlert: "Boli ste odhl√°sen√Ω.",
                langButton: " English",
                kvizPrefix: "Kv√≠z z",
                points: "bodov"
            },
            en: {
                title: "My Page",
                welcome: "Welcome back!",
                quizzes: "Your quizzes",
                startQuiz: " Start new quiz",
                logout: " Log out",
                logoutAlert: "You have been logged out.",
                langButton: " Slovak",
                kvizPrefix: "Quiz from",
                points: "points"
            }
        };

        function updateLanguage(lang) {
            $("title").text(texts[lang].title);
            $("#nadpis").text(texts[lang].welcome);
            $("#zoznamKvizov").text(texts[lang].quizzes);
            $("#spustitBtn").text(texts[lang].startQuiz);
            $("#logout").text(texts[lang].logout);
            $("#langToggle").text(texts[lang].langButton);
            updateQuizList(lang);
        }

        function updateQuizList(lang) {
            $("#kvizy").empty();
            $.get("/kviz/moje").done(function(zoznam) {
                zoznam.forEach(k => {
				$("#kvizy").append(`<li>
					<a href="kviz_detail.html?id=${k.id}">${texts[lang].kvizPrefix} ${k.datum}</a> ‚Äî ${k.bodov}/${k.max} ${texts[lang].points}
				</li>`);
			});

            });
        }

        $.get("/pouzivatel/kto").done(function(data) {
            $("#info").text(data);
        });

        updateQuizList(currentLang);
        $("#logout").click(function() {
            $.post("/pouzivatel/odhlasit").done(() => {
                alert(texts[currentLang].logoutAlert);
                location.href = "index.html";
            });
        });

        $("#langToggle").click(function() {
            currentLang = currentLang === "sk" ? "en" : "sk";
            updateLanguage(currentLang);
        });

        updateLanguage(currentLang);
    </script>
</body>
</html>
